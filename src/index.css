@tailwind base;
@tailwind components;
@tailwind utilities;

/* 모바일 전체 화면을 위한 완전한 리셋 */
* {
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  box-sizing: border-box;
  -webkit-tap-highlight-color: transparent; /* 터치 하이라이트 제거 */
}

html {
  /* iOS Safari 100vh 문제 해결 */
  height: 100%;
  height: -webkit-fill-available;
  
  /* 확대/축소 방지 */
  -webkit-text-size-adjust: 100%;
  -ms-text-size-adjust: 100%;
  text-size-adjust: 100%;
  
  /* 스크롤 바운스 방지 */
  overscroll-behavior: none;
  -webkit-overflow-scrolling: touch;
  
  /* iOS 기본 선택 방지 */
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  user-select: none;
}

body {
  margin: 0;
  padding: 0;
  width: 100%;
  height: 100%;
  height: -webkit-fill-available;
  
  /* 스크롤 방지 */
  overflow: hidden;
  overscroll-behavior: none;
  
  /* 폰트 설정 */
  font-family: 'Helvetica Neue', Helvetica, Arial, system-ui, -apple-system, sans-serif;
  
  /* 터치 최적화 */
  touch-action: manipulation;
  
  /* iOS 기본 선택 방지 */
  -webkit-user-select: none;
  -webkit-touch-callout: none;
  user-select: none;
}

#root {
  width: 100%;
  height: 100vh;
  height: 100dvh; /* 동적 뷰포트 높이 */
  height: -webkit-fill-available;
  margin: 0;
  padding: 0;
  overflow: hidden;
  position: relative;
}

/* 모바일 브라우저 줌 방지 - 더 엄격하게 */
input, 
textarea, 
select, 
button {
  font-size: 16px !important; /* iOS 확대 방지 */
  -webkit-appearance: none;
  appearance: none;
  border-radius: 0; /* iOS 기본 스타일 제거 */
  background-color: transparent;
}

/* 모바일 입력 필드 스타일 개선 */
input:focus,
textarea:focus,
select:focus {
  outline: none;
  -webkit-appearance: none;
  appearance: none;
  zoom: 1; /* 확대 방지 */
}

/* 터치 디바이스 최적화 */
button, 
[role="button"],
a,
.touchable {
  touch-action: manipulation;
  -webkit-tap-highlight-color: transparent;
  min-height: 44px; /* Apple 가이드라인 권장 최소 터치 영역 */
  min-width: 44px;
  cursor: pointer;
  
  /* 터치 피드백 */
  transition: transform 0.1s ease;
}

button:active,
[role="button"]:active,
a:active,
.touchable:active {
  transform: scale(0.98);
}

/* iOS Safari 특정 이슈 해결 */
@supports (-webkit-touch-callout: none) {
  /* iOS에서만 적용 */
  html {
    height: -webkit-fill-available;
  }
  
  body {
    height: -webkit-fill-available;
  }
  
  #root {
    height: -webkit-fill-available;
  }
}

/* Safe area inset을 사용하는 유틸리티 클래스들 */
.safe-top {
  padding-top: env(safe-area-inset-top);
}

.safe-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}

.safe-left {
  padding-left: env(safe-area-inset-left);
}

.safe-right {
  padding-right: env(safe-area-inset-right);
}

.safe-inset {
  padding-top: env(safe-area-inset-top);
  padding-bottom: env(safe-area-inset-bottom);
  padding-left: env(safe-area-inset-left);
  padding-right: env(safe-area-inset-right);
}

/* 뷰포트 높이 관련 유틸리티 */
.h-screen-mobile {
  height: 100vh;
  height: 100dvh;
  height: -webkit-fill-available;
}

.min-h-screen-mobile {
  min-height: 100vh;
  min-height: 100dvh;
  min-height: -webkit-fill-available;
}

/* 스크롤 영역 최적화 */
.scroll-touch {
  -webkit-overflow-scrolling: touch;
}

.no-scroll {
  overflow: hidden;
  -webkit-overflow-scrolling: auto;
  overscroll-behavior: none;
}

/* 드래그 방지 */
.no-drag {
  -webkit-user-drag: none;
  -khtml-user-drag: none;
  -moz-user-drag: none;
  -o-user-drag: none;
  user-drag: none;
}

/* 선택 방지 */
.no-select {
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  user-select: none;
  -webkit-touch-callout: none;
}

/* 터치 없음 (드래그 전용) */
.touch-none {
  touch-action: none;
}

/* 커스텀 애니메이션 */
@keyframes glow-pulse {
  0%, 100% {
    opacity: 0.5;
  }
  50% {
    opacity: 1;
  }
}

.animate-glow-pulse {
  animation: glow-pulse 1s ease-in-out infinite;
}

@keyframes mobile-bounce {
  0%, 20%, 53%, 80%, 100% {
    transform: translate3d(0, 0, 0);
  }
  40%, 43% {
    transform: translate3d(0, -15px, 0);
  }
  70% {
    transform: translate3d(0, -7px, 0);
  }
  90% {
    transform: translate3d(0, -2px, 0);
  }
}

.animate-mobile-bounce {
  animation: mobile-bounce 1s ease-in-out;
}

/* 성능 최적화 */
.gpu-accelerated {
  transform: translateZ(0);
  -webkit-transform: translateZ(0);
  will-change: transform;
}

/* 모바일 특정 미디어 쿼리 */
@media (max-width: 640px) {
  /* 모바일에서 텍스트 크기 조정 */
  .text-xs { font-size: 0.875rem; }
  .text-sm { font-size: 1rem; }
  .text-base { font-size: 1.125rem; }
  .text-lg { font-size: 1.25rem; }
  
  /* 모바일에서 패딩 조정 */
  .p-4 { padding: 1.5rem; }
  .px-4 { padding-left: 1.5rem; padding-right: 1.5rem; }
  .py-4 { padding-top: 1.5rem; padding-bottom: 1.5rem; }
  
  /* 모바일에서 간격 조정 */
  .gap-4 { gap: 1.5rem; }
  .space-y-4 > * + * { margin-top: 1.5rem; }
}

/* 고해상도 디스플레이 최적화 */
@media (-webkit-min-device-pixel-ratio: 2), (min-resolution: 192dpi) {
  .high-dpi-optimized {
    image-rendering: -webkit-optimize-contrast;
    image-rendering: crisp-edges;
  }
}

/* Landscape 모드 대응 */
@media (orientation: landscape) and (max-height: 600px) {
  .landscape-compact {
    padding-top: 0.5rem;
    padding-bottom: 0.5rem;
  }
  
  .landscape-compact .text-6xl,
  .landscape-compact .text-7xl,
  .landscape-compact .text-8xl {
    font-size: 3rem;
  }
}

/* PWA 상태바 색상 지원 */
@media (display-mode: standalone) {
  body {
    padding-top: calc(env(safe-area-inset-top) + 20px);
  }
}

/* 다크모드 준비 (필요시 활성화) */
@media (prefers-color-scheme: dark) {
  /* 다크모드 스타일은 필요시 추가 */
}

/* 접근성 개선 */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }
}